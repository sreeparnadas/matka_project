<div [ngClass]="deviceXs?'mobile':'desktop'"  >
  <mat-tab-group>
    <mat-tab label="Today">
      <div class="d-flex">
        <div class="">
          <form [formGroup]="manualResultForm">
            <div class="d-flex flex-column bd-highlight">
              <div class="p-2 bd-highlight" >
                <div #targetDiv class="row">
                  <mat-form-field class="col-2">
                    <mat-label>Draw time</mat-label>
                    <mat-select  formControlName="drawMasterId" placeholder="Category">
                      <mat-option *ngFor="let time of drawTimes" [value]="time.drawId">
                        {{time.endTime}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <div class=" d-flex col-2" style="height: 0px; border-radius: 10px; padding-top: 0px;padding-left: 10px;">
                    <mat-form-field>
                      <mat-label>Game</mat-label>
                      <mat-select  formControlName="gameId" placeholder="Category" (selectionChange)="changeDraw()">
                        <mat-option *ngFor="let x of games" [value]="x.id">
                          {{x.game_name}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                </div>
                <div><button (click)="getGameInputLoad()">view load</button></div>

                <div>
                  <div class="card" style="width: 18rem;">
                    <div class="card-header">
                      Upcoming result
                    </div>
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item">{{manualResultForm.value.triple}}</li>
                      <li class="list-group-item">{{manualResultForm.value.single}}</li>
                    </ul>
                  </div>
                  <button type="button" class="btn btn-primary mt-2" (click)="saveManualResult()" >Save</button>
                </div>
              </div>
                <div class="d-flex flex-row bd-highlight">
                    <div class="d-flex flex-column" id="triple-flex-column-{{idxSingle}}" *ngFor="let tableData of numberCombinationMatrix; let idxSingle = index">
                      <div class="p-1">
                        <button  class="single-number-button coder-fab" [class.green]="isDisabledSingleHeaderButton"  [disabled]="isDisabledSingleHeaderButton">
                          {{tableData.singleNumber}}
                        </button>
                      </div>
                      <div class="p-1" *ngFor="let numberCombination of tableData.numberCombinations">
                        <button class="coder-fab" mat-fab  matBadge="{{tableData.singleNumber}}" [matBadgeHidden]="currentCombinationMatrixSelectedId != numberCombination.numberCombinationId"  [ngStyle]="{'background-color':(currentCombinationMatrixSelectedId === numberCombination.numberCombinationId) ? 'rgb(30,64,30)' : '#858b8b' }" aria-label="" (click)="setManualResultInForm(tableData.singleNumber, numberCombination);scroll(targetDiv)">
                          {{numberCombination.visibleTripleNumber}}
                        </button>
                      </div>
                    </div>
                </div>
            </div>
          </form>
          <button class="coder-fab" mat-fab (click)="scroll(targetDiv)">
            <i class="bi bi-arrow-up-circle"></i>
          </button>
        </div>

        <div class="ml-3">
          <table class="table table-bordered text-center">
            <thead>
              <tr>
                <th scope="col">Single</th>
                <th scope="col">Triple</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let input of inputLoad">
                <th scope="row">{{input.singleNumber}}</th>
                <td>
                  <table >
                      <tr *ngFor="let data of input.numberCombinations.slice(0, input.numberCombinations.length % columnNumber  === 0 ? input.numberCombinations.length / columnNumber : input.numberCombinations.length / columnNumber + 1); let idx = index">
                        <!-- <td *ngFor="let row of input.numberCombinations">{{row.visible_triple_number}}</td> -->
                        <td *ngFor="let row of input.numberCombinations.slice(idx * columnNumber, idx * columnNumber + columnNumber)"  matBadge="{{row.quantity}}">{{row.visible_triple_number}}</td>
                    </tr>
                  </table>
                </td>
              </tr>

            </tbody>
          </table>
        </div>


      </div>
    </mat-tab>
    <mat-tab label="Old Day">
      <div>
        <form [formGroup]="oldDateResultForm" >
          <div class="d-flex flex-column bd-highlight">
            <div class="p-2 bd-highlight" >
              <div #targetDiv class="row">
                <div class="pt-1 d-flex">
                  <div class="col-3">
                    <mat-form-field  appearance="fill" formControlName="gameDate" >
                      <mat-label >Start date</mat-label>
                      <input  (dateChange)="getDrawTimeForOldResult($event)"  matInput [matDatepicker]="picker" [(ngModel)]= "newDateFilter" [ngModelOptions]="{standalone: true}">
                      <mat-datepicker-toggle matSuffix  [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker [(ngModel)]= "newDateFilter"  [ngModelOptions]="{standalone: true}"></mat-datepicker>
                    </mat-form-field>
                  </div>
                </div>
                <mat-form-field class="col-2">
                  <mat-label>Draw time</mat-label>
                  <mat-select  formControlName="drawMasterId" placeholder="Category">
                    <mat-option *ngFor="let time of oldDateReultDrawTime" [value]="time.drawId">
                      {{time.endTime}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <div class=" d-flex col-2" style="height: 0px; border-radius: 10px; padding-top: 0px;padding-left: 10px;">
                  <mat-form-field>
                    <mat-label>Game</mat-label>
                    <mat-select  formControlName="gameId" placeholder="Category">
                      <mat-option *ngFor="let x of games" [value]="x.id">
                        {{x.game_name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>

                </div>
              </div>


              <div>
                <div class="d-flex">
                  <div class="col-1"></div>
                  <div class="card mt-2" style="width: 18rem; border: 4px solid rgb(217, 255, 2); color: rgb(4, 0, 255);">
                    <div class="card-header text-center">
                      Upcoming result
                    </div>
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item text-center">{{oldDateResultForm.value.triple}}</li>
                      <li class="list-group-item text-center">{{oldDateResultForm.value.single}}</li>
                    </ul>
                  </div>
                  <!-- <button type="button" class="btn btn-primary mt-2" (click)="saveOldDateResult()" >Save</button> -->
                  <!-- <div class="ml-5 mt-3" *ngIf="selectedNumberCombination"><h1 style="border: 2px solid rgb(122, 253, 0); text-align: center; color: red;">{{selectedNumberCombination}}</h1></div> -->
                </div>

      <!--          <button type="button" class="btn btn-primary mt-2" (click)="saveManualResult()" [disabled]="!manualResultForm.valid" >Save</button>-->
                <div style="padding-left: 120px;"><button type="button" class="btn btn-primary mt-2" (click)="saveOldDateResult()" [disabled]="oldDateResultForm.invalid">Save</button></div>


              </div>
            </div>

              <div class="d-flex flex-row bd-highlight">


                  <div class="d-flex flex-column" id="triple-flex-column-{{idxSingle}}" *ngFor="let tableData of numberCombinationMatrix; let idxSingle = index">
                    <div class="p-1">
                      <button  class="single-number-button coder-fab" [class.green]="isDisabledSingleHeaderButton"  [disabled]="isDisabledSingleHeaderButton">
                        {{tableData.singleNumber}}
                      </button>
                    </div>
                    <div class="p-1" *ngFor="let numberCombination of tableData.numberCombinations">
                      <button class="coder-fab" mat-fab  matBadge="{{tableData.singleNumber}}" [matBadgeHidden]="currentCombinationMatrixSelectedId != numberCombination.numberCombinationId"  [ngStyle]="{'background-color':(currentCombinationMatrixSelectedId === numberCombination.numberCombinationId) ? 'rgb(30,64,30)' : '#858b8b' }" aria-label="" (click)="setOldDateResultInForm(tableData.singleNumber, numberCombination);scroll(targetDiv)">
                        {{numberCombination.visibleTripleNumber}}
                      </button>
                    </div>
                  </div>


              </div>
          </div>
        </form>
        <button class="coder-fab" mat-fab (click)="scroll(targetDiv)">
          <i class="bi bi-arrow-up-circle"></i>
        </button>
      </div>
    </mat-tab>
  </mat-tab-group>



</div>






<div class="d-flex" *ngIf="!isProduction">
  <div class="col-3">
    <mat-slide-toggle (change)="showDevArea=!showDevArea">{{showDevArea?"Hide Developer Area":"Show Developer Area"}}</mat-slide-toggle>
  </div>
</div>

<div class="d-flex" *ngIf="!isProduction && showDevArea">
  <div class="col-3">
      <pre>
        numberCombinationMatrix = {{numberCombinationMatrix | json}}
      </pre>
  </div>
  <div class="col-6">
      <pre>
       manualResultForm = {{manualResultForm.value | json}}
      </pre>
  </div>
  <div class="col-3"><pre></pre>
  </div>
</div>
